react çš„å‡½æ•°å¼ç»„ä»¶ï¼Œ

å¯¹æ¯” vue setup è¿”å› render å‡½æ•°çš„ç»„ä»¶



---

# 1. ğŸ— å®šä¹‰æ–¹å¼

|          | React å‡½æ•°ç»„ä»¶                               | Vue 3 `setup` è¿”å› `render`                  |
| :------- | :------------------------------------------- | :------------------------------------------- |
| å†™æ³•     | ç›´æ¥å†™æˆä¸€ä¸ªå‡½æ•°ï¼Œè¿”å› JSX                   | `setup()` å‡½æ•°é‡Œè¿”å›ä¸€ä¸ª `render` å‡½æ•°       |
| ç¤ºä¾‹     | `function App() { return <div>Hello</div> }` | `setup() { return () => h('div', 'Hello') }` |
| JSX æ”¯æŒ | ç›´æ¥æ”¯æŒ                                     | éœ€è¦å®‰è£…æ”¯æŒæ’ä»¶ï¼ˆå¦‚ vue-jsxï¼‰               |

---

# 2. â³ æ‰§è¡Œæ—¶æœº

|              | React å‡½æ•°ç»„ä»¶                                           | Vue 3 `setup`                                                                      |
| :----------- | :------------------------------------------------------- | :--------------------------------------------------------------------------------- |
| ä»€ä¹ˆæ—¶å€™æ‰§è¡Œ | æ¯æ¬¡æ¸²æŸ“æ—¶é‡æ–°æ‰§è¡Œ                                       | åˆå§‹åŒ–æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œè¿”å›çš„ `render` ä¼šå¤šæ¬¡æ‰§è¡Œ                                       |
| è¯´æ˜         | å‡½æ•°ç»„ä»¶æœ¬ä½“æœ¬èº«å°±æ˜¯æ¸²æŸ“é€»è¾‘ï¼Œé‡æ–°æ‰§è¡Œæ¥äº§ç”Ÿæ–°çš„è™šæ‹Ÿ DOM | `setup` åªåšå‡†å¤‡å·¥ä½œï¼ˆå¦‚å®šä¹‰å“åº”å¼æ•°æ®ï¼‰ï¼ŒçœŸæ­£æ¯æ¬¡æ¸²æŸ“çš„æ˜¯ `setup` è¿”å›çš„ `render` |

**é‡ç‚¹ï¼š**  
- React æ¯æ¬¡æ¸²æŸ“ **ç»„ä»¶å‡½æ•°æ•´ä½“é‡æ–°è°ƒç”¨**ã€‚
- Vue `setup` åªåœ¨ç»„ä»¶åˆ›å»ºæ—¶è°ƒç”¨ä¸€æ¬¡ï¼Œä¹‹ååªæ˜¯è°ƒç”¨ `setup` è¿”å›çš„ `render` å‡½æ•°ã€‚

---

# 3. ğŸ§¬ å“åº”å¼æœºåˆ¶

|          | React å‡½æ•°ç»„ä»¶                                       | Vue 3 `setup`                              |
| :------- | :--------------------------------------------------- | :----------------------------------------- |
| çŠ¶æ€ç®¡ç† | å¿…é¡»ä½¿ç”¨ `useState`, `useReducer` ç­‰ hook æ¥ä¿å­˜çŠ¶æ€ | ä½¿ç”¨ Vue çš„å“åº”å¼ç³»ç»Ÿï¼ˆ`ref`, `reactive`ï¼‰ |
| æ›´æ–°è§¦å‘ | æ˜¾å¼ setState æ‰è§¦å‘æ›´æ–°                             | ä¾èµ–è¿½è¸ªï¼Œå“åº”å¼å¯¹è±¡å˜åŒ–è‡ªåŠ¨è§¦å‘æ›´æ–°       |
| ç¤ºä¾‹     | `const [count, setCount] = useState(0)`              | `const count = ref(0)`                     |

**æ€»ç»“ï¼š**
- React å¿…é¡»é€šè¿‡ hook è¿”å›çš„ setter ä¸»åŠ¨æ›´æ–°ã€‚
- Vue è‡ªåŠ¨è¿½è¸ªå“åº”å¼ä¾èµ–ï¼Œåªè¦ `.value` å˜åŒ–å°±è§¦å‘æ¸²æŸ“ã€‚

---

# 4. ğŸ“¤ è¿”å›å€¼

|            | React å‡½æ•°ç»„ä»¶ | Vue 3 `setup`                           |
| :--------- | :------------- | :-------------------------------------- |
| è¿”å›ä»€ä¹ˆ   | JSX è™šæ‹Ÿ DOM   | ä¸€ä¸ª `render` å‡½æ•°ï¼ˆè¿”å› VNode æˆ– JSXï¼‰ |
| ç›´æ¥è¿”å›ï¼Ÿ | æ˜¯             | å¦ï¼Œéœ€è¦ä» `setup` è¿”å› `render`        |

å°ä¾‹å­ ğŸ‘‡

React:

```jsx
function App() {
  return <div>Hello</div>;
}
```

Vue:

```javascript
setup() {
  return () => <div>Hello</div>
}
```

æ³¨æ„ Vue çš„ `setup` å¿…é¡»è¿”å›ä¸€ä¸ª**å‡½æ•°**ï¼ˆè€Œä¸æ˜¯ç›´æ¥ JSXï¼‰ã€‚

---

# 5. ğŸ”„ æ›´æ–°æœºåˆ¶

|          | React å‡½æ•°ç»„ä»¶                                 | Vue 3 `setup` æ¸²æŸ“å‡½æ•°                |
| :------- | :--------------------------------------------- | :------------------------------------ |
| æ›´æ–°åŸç† | æ”¹ state â†’ å‡½æ•°ç»„ä»¶é‡æ–°æ‰§è¡Œ â†’ ç”Ÿæˆæ–°çš„è™šæ‹Ÿ DOM | å“åº”å¼ ref æ”¹å˜ â†’ render å‡½æ•°é‡æ–°æ‰§è¡Œ |
| æ€§èƒ½ç‰¹ç‚¹ | éœ€è¦æ¯”è¾ƒæ–°çš„ state/props â†’ æ‰§è¡Œæ•´ä¸ªå‡½æ•°ä½“      | è‡ªåŠ¨æŒ‰ä¾èµ–è¿½è¸ªï¼Œç»†ç²’åº¦å“åº”å¼ä¼˜åŒ–      |

æ‰€ä»¥ï¼šVue åœ¨ç»†ç²’åº¦ä¾èµ–è¿½è¸ªä¸Šæ¯” React æ›´ç»†è‡´ä¸€ç‚¹ï¼Œæ¯”å¦‚ `count` å˜åŒ–åªå½±å“å®ƒçš„ä½¿ç”¨å¤„ï¼Œè€Œ React æ˜¯æ•´ä¸ªå‡½æ•°é‡ç®—ã€‚

---

# ğŸ“Š ä¸€å¼ ç»ˆæå¯¹æ¯”è¡¨

| å¯¹æ¯”ç»´åº¦     | React å‡½æ•°ç»„ä»¶           | Vue 3 setup è¿”å› render             |
| :----------- | :----------------------- | :---------------------------------- |
| å®šä¹‰å½¢å¼     | æ™®é€šå‡½æ•°                 | `setup` è¿”å›ä¸€ä¸ª `render`           |
| æ¸²æŸ“æ—¶æ‰§è¡Œ   | æ•´ä¸ªç»„ä»¶å‡½æ•°æ¯æ¬¡é‡æ–°æ‰§è¡Œ | `render` å‡½æ•°æ‰§è¡Œï¼Œ`setup` åªåˆå§‹åŒ– |
| å“åº”å¼æ¨¡å‹   | é€šè¿‡ Hook æ‰‹åŠ¨ç®¡ç†       | é€šè¿‡ ref/reactive è‡ªåŠ¨è¿½è¸ª          |
| æ›´æ–°è§¦å‘     | å¿…é¡»æ‰‹åŠ¨è°ƒç”¨ setState    | ä¿®æ”¹å“åº”å¼æ•°æ®è‡ªåŠ¨æ›´æ–°              |
| JSX æ”¯æŒ     | Babel æ’ä»¶               | éœ€è¦ Babel æ’ä»¶æˆ– vite æ’ä»¶         |
| ç”Ÿå‘½å‘¨æœŸé’©å­ | Hook é£æ ¼ï¼ˆuseEffectï¼‰   | onMounted/onUpdated ç­‰              |

---

# ğŸ§  ç›´è§‚ç†è§£ï¼šä¸€å¥è¯æ€»ç»“

> **React å‡½æ•°ç»„ä»¶ = æ¯æ¬¡æ¸²æŸ“é‡æ–°æ‰§è¡Œæœ¬ä½“ã€‚  
Vue 3 `setup` + `render` = ç”¨ä¸€æ¬¡ `setup` åšåˆå§‹åŒ–ï¼Œç”¨ `render` ä¸“é—¨è´Ÿè´£æ¸²æŸ“ã€‚**

---


**è®¡æ•°å™¨ï¼ˆCounterï¼‰å¯¹æ¯” demo**ï¼Œ  
åˆ†åˆ«ç”¨ **React å‡½æ•°ç»„ä»¶** å’Œ **Vue 3 Composition API + setup è¿”å› render å‡½æ•°** å®ç°ã€‚

---

# ğŸ¯ è¦å®ç°çš„åŠŸèƒ½

- æ˜¾ç¤ºä¸€ä¸ªæ•°å­—
- ç‚¹å‡»æŒ‰é’®ï¼Œæ•°å­—åŠ ä¸€

---

# 1. âœ… React ç‰ˆï¼ˆå‡½æ•°å¼ç»„ä»¶ï¼‰

```jsx
// React 18+ å†™æ³•
import { useState } from 'react';

function Counter() {
  const [count, setCount] = useState(0); // ç”¨ Hook ä¿å­˜çŠ¶æ€

  return (
    <div>
      <p>å½“å‰è®¡æ•°ï¼š{count}</p>
      <button onClick={() => setCount(count + 1)}>å¢åŠ </button>
    </div>
  );
}

export default Counter;
```

**ç‰¹ç‚¹**ï¼š
- `useState` åˆ›å»ºå±€éƒ¨çŠ¶æ€
- ç‚¹å‡»æŒ‰é’®ï¼Œè°ƒç”¨ `setCount`ï¼Œè§¦å‘æ•´ä¸ª `Counter` ç»„ä»¶é‡æ–°æ‰§è¡Œä¸€æ¬¡
- æ¯æ¬¡ render éƒ½é‡æ–°èµ°ä¸€é `Counter()` å‡½æ•°ä½“

---

# 2. âœ… Vue 3 ç‰ˆï¼ˆ`setup` è¿”å› `render` å‡½æ•°ï¼‰

```javascript
// Vue 3 + JSX å†™æ³•ï¼ˆéœ€è¦å¯ç”¨ vue-jsx æ’ä»¶ï¼‰
import { ref } from 'vue';

export default {
  setup() {
    const count = ref(0); // ä½¿ç”¨ Vue å“åº”å¼

    return () => (
      <div>
        <p>å½“å‰è®¡æ•°ï¼š{count.value}</p>
        <button onClick={() => count.value++}>å¢åŠ </button>
      </div>
    );
  }
}
```

**ç‰¹ç‚¹**ï¼š
- `ref` åˆ›å»ºå“åº”å¼å˜é‡
- `setup` åˆå§‹åŒ–å¥½å“åº”å¼æ•°æ®
- `render` æ˜¯ `setup` è¿”å›çš„å‡½æ•°ï¼Œæ¯æ¬¡åªå› ä¸ºä¾èµ–çš„ `count.value` å˜åŒ–é‡æ–°æ‰§è¡Œ
- Vue å†…éƒ¨åšäº† **ä¾èµ–è¿½è¸ª**ï¼Œåªè¦ `count` æœ‰å˜åŒ–æ‰é‡æ–°æ¸²æŸ“

---

# ğŸ“¸ ä¸¤ä¸ªç‰ˆæœ¬æ‰§è¡Œæµç¨‹å¯¹æ¯”

| é¡¹ç›®          | React å‡½æ•°ç»„ä»¶                    | Vue 3 setup render                         |
| :------------ | :-------------------------------- | :----------------------------------------- |
| ç‚¹å‡»æŒ‰é’®å    | setCount è§¦å‘é‡æ–°æ¸²æŸ“æ•´ä¸ªå‡½æ•°ç»„ä»¶ | ref çš„ value å˜åŒ–ï¼Œä¾èµ–è¿½è¸ªè‡ªåŠ¨è§¦å‘ render |
| ç»„ä»¶æœ¬ä½“      | æ¯æ¬¡é‡æ–°æ‰§è¡Œæ•´ä¸ªå‡½æ•°              | setup åªåˆå§‹åŒ–ä¸€æ¬¡ï¼Œrender å‡½æ•°è¢«åå¤è°ƒç”¨  |
| å“åº”å¼ç®¡ç†    | æ‰‹åŠ¨ç®¡ç†ï¼ˆHookï¼‰                  | è‡ªåŠ¨å“åº”å¼ï¼ˆRefç³»ç»Ÿï¼‰                      |
| æ˜¯å¦éœ€è¦ memo | ç»å¸¸éœ€è¦ `React.memo` ä¼˜åŒ–å­ç»„ä»¶  | Vue è‡ªåŠ¨ä¾èµ–è¿½è¸ªï¼Œä¸éœ€è¦æ‰‹åŠ¨ memo          |

---

# ğŸ“¢ è¡¥å……ä¸€ç‚¹å°ç»†èŠ‚

åœ¨ React ä¸­ï¼Œå¦‚æœç»„ä»¶å¤æ‚ï¼ŒçŠ¶æ€å˜åŒ–å®¹æ˜“å¯¼è‡´**ä¸å¿…è¦çš„å­ç»„ä»¶é‡æ–°æ¸²æŸ“**ï¼Œæ‰€ä»¥å¸¸å¸¸éœ€è¦é…åˆï¼š

- `useMemo`
- `useCallback`
- `React.memo`

æ¥è¿›è¡Œæ‰‹åŠ¨ä¼˜åŒ–ã€‚

è€Œ Vue ç”±äºå“åº”å¼ç³»ç»Ÿå¤©ç„¶å¯ä»¥è¿½è¸ªä¾èµ–ï¼Œæ‰€ä»¥å³ä½¿æ˜¯å¤æ‚ç»„ä»¶ï¼Œåªè¦ `count` å˜äº†ï¼Œåªæœ‰ç”¨åˆ° `count` çš„åœ°æ–¹é‡æ–°æ›´æ–°ï¼Œ**æ€§èƒ½å¤©ç„¶æ›´å¥½**ï¼Œä¸éœ€è¦æ‰‹åŠ¨ memoã€‚

---

# ğŸ‰ ç»“è®º

è¿™ä¸ªå° Demo å¸®åŠ©ä½ çœ‹åˆ°æ ¸å¿ƒå·®åˆ«ï¼š

> **React æ˜¯å‡½æ•°é‡æ–°è·‘ä¸€éï¼ŒVue æ˜¯å“åº”å¼è‡ªåŠ¨è¿½è¸ªå˜åŒ–ï¼Œåªæœ‰éœ€è¦çš„éƒ¨åˆ†æ›´æ–°ã€‚**


# ğŸ¯ è¿›é˜¶ç‰ˆï¼š**çˆ¶å­ç»„ä»¶é€šä¿¡ + å­ç»„ä»¶ä¼˜åŒ–å¯¹æ¯”**

**éœ€æ±‚**ï¼š

- çˆ¶ç»„ä»¶ç»´æŠ¤ä¸€ä¸ª `count`
- å­ç»„ä»¶æ¥å— `count` å¹¶æ˜¾ç¤º
- çˆ¶ç»„ä»¶ç‚¹å‡»æŒ‰é’®å¢åŠ  `count`
- å­ç»„ä»¶æœ¬èº«æ²¡æœ‰å˜åŒ–æ—¶ **åº”è¯¥é¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“**

---

# 1. âœ… React ç‰ˆï¼šæ²¡æœ‰ä¼˜åŒ– â” æœ‰ä¼˜åŒ–ï¼ˆæ‰‹åŠ¨ memoï¼‰

### Reactï¼ˆæœªä¼˜åŒ–ç‰ˆï¼‰

```jsx
import { useState } from 'react';

function Child({ count }) {
  console.log('ğŸ‘¶ å­ç»„ä»¶æ¸²æŸ“äº†');
  return <p>å­ç»„ä»¶æ”¶åˆ°çš„ count: {count}</p>;
}

function App() {
  const [count, setCount] = useState(0);
  const [other, setOther] = useState(0); // æ·»åŠ å¦ä¸€ä¸ªçŠ¶æ€

  return (
    <div>
      <h1>çˆ¶ç»„ä»¶ count: {count}</h1>
      <button onClick={() => setCount(count + 1)}>å¢åŠ  count</button>
      <button onClick={() => setOther(other + 1)}>æ”¹å˜ other</button>
      <Child count={count} />
    </div>
  );
}

export default App;
```

ğŸ” **ç°è±¡**ï¼š
- ç‚¹å‡» "æ”¹å˜ other" ä¹Ÿä¼šå¯¼è‡´ `Child` é‡æ–°æ¸²æŸ“ï¼ˆå› ä¸ºçˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œå­ç»„ä»¶ä¹Ÿè·Ÿç€æ¸²æŸ“äº†ï¼ï¼‰

---

### Reactï¼ˆåŠ ä¼˜åŒ–ç‰ˆï¼š`React.memo`ï¼‰

```jsx
import { useState, memo } from 'react';

const Child = memo(function Child({ count }) {
  console.log('ğŸ‘¶ å­ç»„ä»¶æ¸²æŸ“äº†');
  return <p>å­ç»„ä»¶æ”¶åˆ°çš„ count: {count}</p>;
});

function App() {
  const [count, setCount] = useState(0);
  const [other, setOther] = useState(0);

  return (
    <div>
      <h1>çˆ¶ç»„ä»¶ count: {count}</h1>
      <button onClick={() => setCount(count + 1)}>å¢åŠ  count</button>
      <button onClick={() => setOther(other + 1)}>æ”¹å˜ other</button>
      <Child count={count} />
    </div>
  );
}

export default App;
```

ğŸ” **ç°è±¡**ï¼š
- ç‚¹å‡» "æ”¹å˜ other" æ—¶ï¼Œ`Child` **ä¸ä¼š**é‡æ–°æ¸²æŸ“äº†ï¼
- å› ä¸º `React.memo` è®© React åªåœ¨ `count` å˜åŒ–æ—¶æ‰é‡æ–°æ¸²æŸ“ `Child`ã€‚

---

# 2. âœ… Vue 3 ç‰ˆï¼šå¤©ç„¶å“åº”å¼ï¼Œæ— éœ€æ‰‹åŠ¨ memo

```jsx
import { ref } from 'vue';

const Child = {
  props: ['count'],
  setup(props) {
    console.log('ğŸ‘¶ å­ç»„ä»¶ setup æ‰§è¡Œäº†');
    return () => <p>å­ç»„ä»¶æ”¶åˆ°çš„ count: {props.count}</p>;
  }
};

export default {
  components: { Child },
  setup() {
    const count = ref(0);
    const other = ref(0);

    return () => (
      <div>
        <h1>çˆ¶ç»„ä»¶ count: {count.value}</h1>
        <button onClick={() => count.value++}>å¢åŠ  count</button>
        <button onClick={() => other.value++}>æ”¹å˜ other</button>
        <Child count={count.value} />
      </div>
    );
  }
}
```

ğŸ” **ç°è±¡**ï¼š
- Vue åªåœ¨ `count` å˜åŒ–æ—¶é‡æ–°æ¸²æŸ“ `Child`ï¼
- ç‚¹å‡» "æ”¹å˜ other" ä¸ä¼šè®© `Child` é‡æ–°æ¸²æŸ“ã€‚
- è¿™å¾—ç›Šäº Vue çš„ **ä¾èµ–è¿½è¸ªç³»ç»Ÿ**ï¼š`Child` åªä¾èµ– `count.value`ã€‚

---

# ğŸ“Š æœ€ç›´è§‚çš„æ€»ç»“å¯¹æ¯”

| é¡¹ç›® | React | Vue 3 |
|:---|:---|:---|
| çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ | é»˜è®¤å­ç»„ä»¶ä¹Ÿé‡æ–°æ¸²æŸ“ï¼ˆéœ€è¦æ‰‹åŠ¨ç”¨ memo ä¼˜åŒ–ï¼‰ | å­ç»„ä»¶ä¸ä¼šå› æ— å…³æ•°æ®å˜åŒ–é‡æ–°æ¸²æŸ“ï¼ˆè‡ªåŠ¨è¿½è¸ªä¾èµ–ï¼‰ |
| æ‰‹åŠ¨ä¼˜åŒ– | éœ€è¦ `React.memo`, `useMemo`, `useCallback` | ä¸éœ€è¦ |
| æ€§èƒ½ä¼˜åŒ–è´Ÿæ‹… | å¼€å‘è€…è‡ªå·±æ‰¿æ‹… | æ¡†æ¶è‡ªåŠ¨å¤„ç† |
| å“åº”å¼ç²’åº¦ | ç²’åº¦ç²—ï¼ˆæ•´ä¸ªå‡½æ•°é‡ç®—ï¼‰ | ç²’åº¦ç»†ï¼ˆå­—æ®µä¾èµ–è¿½è¸ªï¼‰ |

---

# ğŸ§  ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ

- **React çš„æ¸²æŸ“æ¨¡å‹**ï¼šæ˜¯**æ ‘å½¢é‡ç®—**ï¼ˆè‡ªé¡¶å‘ä¸‹ï¼‰ï¼Œä¸€æ—¦çˆ¶ç»„ä»¶å˜åŒ–ï¼Œé»˜è®¤å­ç»„ä»¶ä¹Ÿè·Ÿç€é‡æ–°æ‰§è¡Œã€‚
- **Vue çš„æ¸²æŸ“æ¨¡å‹**ï¼šæ˜¯**ä¾èµ–è¿½è¸ª**ï¼Œ**å­—æ®µçº§**åœ°è¿½è¸ªå˜åŒ–ï¼Œåªå½±å“å¿…è¦çš„åœ°æ–¹ã€‚
- React éœ€è¦é€šè¿‡ `memo`ã€`useMemo`ã€`useCallback` ç­‰æ‰‹åŠ¨æ§åˆ¶æ›´æ–°ç²’åº¦ã€‚
- Vue å¤©ç„¶ç»†ç²’åº¦å“åº”å¼ï¼Œä¸éœ€è¦å¼€å‘è€…æ“å¿ƒä»€ä¹ˆæ—¶å€™ç¼“å­˜ï¼Œä»€ä¹ˆæ—¶å€™æ›´æ–°ã€‚

---

# ğŸš€ æœ€åï¼Œç”¨ä¸€å¥è¯æ€»ç»“

> **React è¦æ‰‹åŠ¨ä¼˜åŒ–ç»„ä»¶æ›´æ–°ï¼›Vue 3 è‡ªåŠ¨æ ¹æ®å“åº”å¼æ•°æ®ä¾èµ–è¿½è¸ªï¼Œç²’åº¦æ›´ç»†ï¼Œå¼€å‘è€…å‹åŠ›æ›´å°ã€‚**

---


# ğŸ¯ è¦å®ç°çš„åŠŸèƒ½

- çˆ¶ç»„ä»¶æœ‰ä¸€ä¸ªæŒ‰é’® `increaseCount`
- çˆ¶ç»„ä»¶æŠŠ `increaseCount` å‡½æ•° **ä½œä¸º props** ä¼ ç»™å­ç»„ä»¶
- ç‚¹å‡»å­ç»„ä»¶å†…éƒ¨æŒ‰é’®ï¼Œè§¦å‘çˆ¶ç»„ä»¶çš„æ–¹æ³•

---

# 1. âœ… React ç‰ˆï¼šå‡½æ•° props æœªä¼˜åŒ– â” useCallback ä¼˜åŒ–ç‰ˆ

### Reactï¼ˆæœªä¼˜åŒ–ç‰ˆï¼‰

```jsx
import { useState } from 'react';

function Child({ onClick }) {
  console.log('ğŸ‘¶ å­ç»„ä»¶æ¸²æŸ“äº†');
  return <button onClick={onClick}>å­ç»„ä»¶æŒ‰é’®</button>;
}

function App() {
  const [count, setCount] = useState(0);
  const [other, setOther] = useState(0);

  // increaseCount æ¯æ¬¡ App æ¸²æŸ“éƒ½ä¼šæ–°å»ºä¸€ä¸ªå‡½æ•°
  const increaseCount = () => {
    setCount(count + 1);
  };

  return (
    <div>
      <h1>çˆ¶ç»„ä»¶ count: {count}</h1>
      <button onClick={() => setOther(other + 1)}>æ”¹å˜ other</button>
      <Child onClick={increaseCount} />
    </div>
  );
}

export default App;
```

ğŸ” **ç°è±¡**ï¼š
- æ¯æ¬¡çˆ¶ç»„ä»¶ `App` æ¸²æŸ“ï¼ˆæ— è®ºæ˜¯ç‚¹å‡»å¢åŠ  `other` è¿˜æ˜¯å…¶ä»–æ“ä½œï¼‰ï¼Œ
- `increaseCount` éƒ½æ˜¯ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼ˆå†…å­˜æ–°åœ°å€ï¼‰
- å¯¼è‡´ `Child` å³ä½¿æœ¬èº«æ²¡å˜åŒ–ï¼Œä¹Ÿè¢«**å¼ºåˆ¶é‡æ–°æ¸²æŸ“**

---

### Reactï¼ˆç”¨ `useCallback` ä¼˜åŒ–ç‰ˆï¼‰

```jsx
import { useState, useCallback } from 'react';

const Child = React.memo(function Child({ onClick }) {
  console.log('ğŸ‘¶ å­ç»„ä»¶æ¸²æŸ“äº†');
  return <button onClick={onClick}>å­ç»„ä»¶æŒ‰é’®</button>;
});

function App() {
  const [count, setCount] = useState(0);
  const [other, setOther] = useState(0);

  // ç”¨ useCallback ç¼“å­˜ increaseCountï¼Œåªæœ‰ count æ”¹å˜æ—¶æ‰é‡æ–°ç”Ÿæˆ
  const increaseCount = useCallback(() => {
    setCount(c => c + 1); // æ³¨æ„è¿™é‡Œæ”¹æˆå‡½æ•°å¼ setState é¿å…ä¾èµ–
  }, []);

  return (
    <div>
      <h1>çˆ¶ç»„ä»¶ count: {count}</h1>
      <button onClick={() => setOther(other + 1)}>æ”¹å˜ other</button>
      <Child onClick={increaseCount} />
    </div>
  );
}

export default App;
```

ğŸ” **ç°è±¡**ï¼š
- ç‚¹å‡» "æ”¹å˜ other"ï¼Œ`increaseCount` åœ°å€ä¸å˜
- å­ç»„ä»¶ `Child` ä¸ä¼šé‡æ–°æ¸²æŸ“ï¼
- å¿…é¡»é…åˆ `React.memo` + `useCallback` æ‰èƒ½çœŸæ­£é¿å…æ— æ„ä¹‰æ¸²æŸ“ã€‚

---

# 2. âœ… Vue 3 ç‰ˆï¼šå¤©ç„¶æ²¡é—®é¢˜

```jsx
import { ref } from 'vue';

const Child = {
  props: ['onClick'],
  setup(props) {
    console.log('ğŸ‘¶ å­ç»„ä»¶ setup æ‰§è¡Œäº†');
    return () => <button onClick={props.onClick}>å­ç»„ä»¶æŒ‰é’®</button>;
  }
};

export default {
  components: { Child },
  setup() {
    const count = ref(0);
    const other = ref(0);

    // increaseCount å®šä¹‰ä¸€æ¬¡å°±å¥½äº†
    const increaseCount = () => {
      count.value++;
    };

    return () => (
      <div>
        <h1>çˆ¶ç»„ä»¶ count: {count.value}</h1>
        <button onClick={() => other.value++}>æ”¹å˜ other</button>
        <Child onClick={increaseCount} />
      </div>
    );
  }
}
```

ğŸ” **ç°è±¡**ï¼š
- Vue é‡Œï¼Œ`increaseCount` å®šä¹‰å¥½ä»¥åï¼Œä¸ç®¡çˆ¶ç»„ä»¶æœ‰æ²¡æœ‰é‡æ–°æ¸²æŸ“ï¼Œå‡½æ•°åœ°å€æ˜¯ç¨³å®šçš„ã€‚
- Vue ä¸éœ€è¦ `useCallback`ï¼Œä¹Ÿä¸ç”¨ memoã€‚
- ç‚¹å‡» "æ”¹å˜ other"ï¼Œ**å­ç»„ä»¶ `Child` å®Œå…¨ä¸ä¼šé‡æ–° setup æˆ–é‡æ–°æ¸²æŸ“**ã€‚

---

# ğŸ“Š æœ€ç›´è§‚æ€»ç»“è¡¨

| å¯¹æ¯”é¡¹ | React | Vue 3 |
|:---|:---|:---|
| å‡½æ•° props | æ¯æ¬¡æ¸²æŸ“é»˜è®¤æ–°å»ºï¼Œéœ€è¦æ‰‹åŠ¨ `useCallback` ä¼˜åŒ– | å‡½æ•°é»˜è®¤ä¿æŒç¨³å®šï¼Œä¸éœ€è¦ä¼˜åŒ– |
| å­ç»„ä»¶é‡æ–°æ¸²æŸ“ | å¯èƒ½æ— æ„ä¹‰é‡æ¸²æŸ“ï¼ˆå¿…é¡»ç”¨ memo + useCallbackï¼‰ | è‡ªåŠ¨é¿å…ï¼Œåªåœ¨ä¾èµ–å˜åŒ–æ—¶è§¦å‘ |
| å¼€å‘è€…è´Ÿæ‹… | é«˜ï¼Œéœ€è¦è‡ªå·±ç®¡ç† memo/callback | ä½ï¼Œæ¡†æ¶è‡ªåŠ¨å¤„ç† |

---

# ğŸ§  ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ

- **React å‡½æ•°ç»„ä»¶**æ˜¯çº¯å‡½æ•°ï¼Œæ¯æ¬¡æ¸²æŸ“éƒ½é‡æ–°æ‰§è¡Œï¼Œ**å‡½æ•°æ˜¯æ–°åˆ›å»ºçš„å¯¹è±¡**ã€‚
- **Vue çš„ setup**åªæ‰§è¡Œä¸€æ¬¡ï¼Œsetup é‡Œå®šä¹‰çš„æ‰€æœ‰å¯¹è±¡/å‡½æ•°**å¤©ç„¶æŒä¹…ä¸”ç¨³å®š**ï¼Œä¸æ˜¯æ¯æ¬¡æ¸²æŸ“é‡å»ºã€‚
- Vue å†…éƒ¨è¿˜æœ‰ Proxy æŠ€æœ¯ï¼Œè¿›ä¸€æ­¥åšåˆ°**ç»†ç²’åº¦ä¾èµ–è¿½è¸ª**ï¼Œä»æºå¤´å‡å°‘æ— æ„ä¹‰æ›´æ–°ã€‚

---

# ğŸ‰ æœ€åä¸€å¥è¯æ€»ç»“

> **React ä¸­å‡½æ•° props éœ€è¦æ‰‹åŠ¨ `useCallback`ï¼ŒVue 3 ä¸­å¤©ç„¶å°±ç¨³å®šï¼Œæ— éœ€é¢å¤–ä¼˜åŒ–ã€‚**

---

